####  props 静态和props 动态 区别

```html
// 都是静态数据字符串
// 这些都是写死的字符串，数据不会变动
<foo a="b" /> 理解为 var a = 'a'
<foo a="123"/>
<foo a="true"/>
// 动态数据
// 使用v-band 进行数据的动态绑定
// 如果数据a发生变化，那么属性a也会变化
<foo v-band:a='a'/>
<foo :a='b'/>
```

````js
export default{
    data(){
        a:1,
        b:2,
    }
}
````



#### 跨域问题

同源策略：

+ 协议相同
+ 域名相同
+ 端口相同

只要上面三种其中任何一种不满足，就会受到跨域 "同源策略" 限制不允许请求（接收返回数据）。

举例来说，`http://www.example.com/dir/page.html` 这个网址，协议是 `http://`，域名是 `www.example.com`，端口是 `80`（默认端口可以省略）。它的同源情况如下。

```
http://www.example.com/dir2/other.html：同源
http://example.com/dir/other.html：不同源（域名不同）
http://v2.www.example.com/dir/other.html：不同源（域名不同）
http://www.example.com:81/dir/other.html：不同源（协议不同、端口不同）
```

**同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。**

以下行为会受到跨域限制：

````
（1） Cookie、LocalStorage 和 IndexDB 无法读取。
（2） DOM 无法获得。
（3） AJAX 请求不能发送。
````

有时候我们需要请求不同源的资源，如何避开跨域限制：

+ JSONP（很少用）

  + 仅支持 GET 请求，限制比较大

  + 常见于一些第三方的数据服务器，列如：查询天气数据，查询快递数据

    - JSONP 需要 前后端配合才能使用，服务端需要单独处理，客户端也需要单独处理

    - 如果是jquery 发送请求 则：

      ```js
      $.ajax({
          url:'http://cross-dom/get_data',
          dataType:'jsonp' // 指定服务器返回的数据类型
      })
      ```

      - 如果是axios发送请求 则：

        ```js
        //第三方包npm install jsonp --save
        const jsonp=require('jsonp')
        jsonp(url,null,(err,data)=>{
            if(err){
                console.log(err)
            }else{
                console.log(data)
            }
        })
        ```

        

      

+ CORS（推荐、最方便）

  + CORS 是HTTP 协议新增的一种跨域资源请求处理方式。他只需要再服务端给客户端的响应中发送一个数据字符：

    ````
    Access-Control-Allow-Origin:*
    ````

    客户端收到带有上面的响应头的数据字段，允许使用。

    该方式只需要服务端设置即可，客户端什么也不同做，正常发送请求即可

    

+ 服务器代理

页面服务器代理：也能发送请求，而且不受跨域限制

![image-20220306222450274](C:\Users\鸢泽童话\AppData\Roaming\Typora\typora-user-images\image-20220306222450274.png)

如何再 Vue 项目中配置代理避开跨域限制：

再你的 Vue 项目的根目录添加 `vue.config.js` ：

```js
module.exports = {
  devServer: {
    proxy: {
        // 把所有已 /api 开头的请求代理转发
      '/api': {
        target: '<url>',  // 要代理的目标地址，这个填写你的接口服务地址
        ws: true,  // 开启 webSocket 代理
        changeOrigin: true  // 修改源地址
      },
      '/foo': {
          // 把 /foo 开头的请求代理转发到 target 目标地址
        target: '<other_url>'
      }
    }
  }
}
```

